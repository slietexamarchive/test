<!DOCTYPE html>
<html>
<head>
	<title>File Search</title>
</head>
<body>
	<h1>File Search</h1>
	<form action="" method="GET">
		<label for="search-input">Search:</label>
		<input type="text" id="search-input" name="q" placeholder="Enter a file name">
		<button type="submit">Search</button>
	</form>
	<?php
		// Read the JSON file and decode its contents into an array
		$jsonString = file_get_contents('files.json');
		$data = json_decode($jsonString, true);

		// Check if the search query is set in the URL parameters
		if (isset($_GET['q'])) {
			$searchQuery = $_GET['q'];

			// Filter the results based on the search query
			$filteredData = array_filter($data, function($file) use ($searchQuery) {
				return stripos($file['name'], $searchQuery) !== false;
			});

			// Display the filtered results as a list
			if (!empty($filteredData)) {
				echo '<ul>';
				foreach ($filteredData as $file) {
					echo '<li><a href="' . $file['link'] . '">' . $file['name'] . '</a></li>';
				}
				echo '</ul>';
			} else {
				echo '<p>No results found.</p>';
			}
		}
	?>
</body>
</html>
